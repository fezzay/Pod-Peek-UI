{
  "nodes": [
    {
      "id": "pod-1",
      "type": "pod",
      "data": {
        "podName": "api-backend-pod",
        "status": "Running",
        "replicasRunning": 3,
        "replicasTotal": 3,
        "containers": [
          {
            "name": "be",
            "image": "fezzzy/docker.io",
            "ports": [
              { "name": "http", "port": 1557 },
              { "name": "https", "port": 1558 }
            ],
            "mounts": ["/config", "/data"],
            "env": [
              { "key": "NODE_ENV", "value": "production" }
            ]
          },
          {
            "name": "bez",
            "image": "fezzzy/docker.ios",
            "ports": [
              { "name": "http", "port": 1557 },
              { "name": "https", "port": 1558 }
            ],
            "mounts": ["/config", "/data"],
            "env": [
              { "key": "NODE_ENV", "value": "production" }
            ]
          }
        ]
      },
      "position": { "x": 0, "y": 200 }
    },
    {
      "id": "svc-1",
      "type": "service",
      "data": {
        "serviceName": "api-backend-service",
        "type": "ClusterIP",
        "ports": [
          { "name": "http", "port": 1557, "targetPort": 1557 },
          { "name": "https", "port": 1558, "targetPort": 1558 }
        ],
        "selectors": ["app=nginx"]
      },
      "position": { "x": 500, "y": 250 }
    },
    {
      "id": "pod-2",
      "type": "pod",
      "data": {
        "podName": "frontend-pod",
        "status": "Pending",
        "replicasRunning": 4,
        "replicasTotal": 5,
        "containers": [
          {
            "name": "fe",
            "image": "fezzzy/docker.io",
            "ports": [
              { "name": "http", "port": 80 },
              { "name": "https", "port": 443}
            ],
            "mounts": ["/data"],
            "env": [
              { "key": "NODE_ENV", "value": "staging" },
              { "key": "BACKEND_URL", "value": "api-backend-service:1557" }
            ]
          }
        ]
      },
      "position": { "x": 1000, "y": 50 }
    },
    {
      "id": "svc-2",
      "type": "service",
      "data": {
        "serviceName": "frontend-service",
        "type": "ClusterIP",
        "ports": [
          { "name": "http", "port": 80, "targetPort": 80 },
          { "name": "https", "port": 443, "targetPort": 443 }
        ],
        "selectors": ["app=nginx"]
      },
      "position": { "x": 1500, "y": 150 }
    },
    {
      "id": "ing-1",
      "type": "ingress",
      "data": {
        "ingressName": "main-ingress",
        "hosts": ["example.com"],
        "rules": [
          { "path": "/", "service": "frontend-service", "port": 443 },
          { "path": "/api", "service": "api-backend-service", "port": 1558 }
        ]
      },
      "position": { "x": 2000, "y": 200 }
    }
  ],
  "edges": [
    {
      "id": "api-pod-http:api-svc-http",
      "source": "pod-1",
      "target": "svc-1",
      "sourceHandle": "c0-port-0",
      "targetHandle": "port-0"
    },
    {
      "id": "api-pod-https:api-svc-https",
      "source": "pod-1",
      "target": "svc-1",
      "sourceHandle": "c0-port-1",
      "targetHandle": "port-1"
    },
    {
      "id": "api-svc-http:front-pod-env",
      "source": "svc-1",
      "target": "pod-2",
      "sourceHandle": "targetPort-0",
      "targetHandle": "c0-env-1"
    },
    {
      "id": "front-pod-http:front-svc-http",
      "source": "pod-2",
      "target": "svc-2",
      "sourceHandle": "c0-port-0",
      "targetHandle": "port-0"
    },
    {
      "id": "front-pod-https:front-svc-https",
      "source": "pod-2",
      "target": "svc-2",
      "sourceHandle": "c0-port-1",
      "targetHandle": "port-1"
    },
    {
      "id": "front-svc-https:ingress-front",
      "source": "svc-2",
      "target": "ing-1",
      "sourceHandle": "targetPort-1",
      "targetHandle": "rule-0"
    },
    {
      "id": "api-svc-https:ingress-back",
      "source": "svc-1",
      "target": "ing-1",
      "sourceHandle": "targetPort-1",
      "targetHandle": "rule-1"
    }
  ]
}
